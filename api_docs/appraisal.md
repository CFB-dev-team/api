# Appraisal (Анкетирование)

## Создание/обновление

`POST /api/appraisal`

Пример сообщения в Body запроса:

```json
{
    "externalId": "1790499",
    "appraisalTemplateExternalId": "16003",
    "appraisalTypeExternalId": "PA",
    "appraiseeUserExtrernalId": "SU65484",
    "appraisalPeriodStart": "2017-07-01T00:00:00+03:00",
    "appraisalPeriodEnd": "2017-12-31T00:00:00+03:00",
    "status": "PLANNED",
    "initiatorUserExternalId": "SU2101",
    "participantLastDate": null
}
```

### Описание полей

|Поле|Тип|Описание|
|----|--------|------------|
|externalId|string|Идентификатор из внешней системы|
|appraisalTemplateExternalId|string|Идентификатор шаблона анкетирования из внешней системы. *Справочная сущность, в API отсутствует*|
|appraisalTypeExternalId|string|Идентификатор типа анкетирования из внешней системы. *Справочная сущность, в API отсутствует*|
|appraiseeUserExtrernalId|string|Идентификатор пользователя, по которому проводится анкетирование,  из внешней системы|
|appraisalPeriodStart| datetime (подробнее о формате [здесь](general.md))|Дата старта анкетирования|
|appraisalPeriodEnd| datetime (подробнее о формате [здесь](general.md))|Дата окончания анкетирования|
|status| Значения из [перечисления](#appraisal_status)| Статус анкетирования|
|initiatorUserExternalId| string | Идентификатор пользователя из внешней системы, запустившего анекетирование|
|participantLastDate| datetime| Крайняя дата дачи отзыва|



<a name=appraisal_status></a>
### Статус анкетирования
|Значение|Описание|
|----|--------|
| ONGOING | Активное анекетирование | 
| COMPLETED | Завершенное анкетирование |
| DELETED | Удаленное анкетирование |
| PLANNED | Запланированное анкетирование|


### Логика работы

Если анкетирование с таким же идентификатором из внешней системы уже существует, то будет произведена операция обновления. Если же такое анкетирование отсутствует, то будет создано новое.
В случае создания записи будет возвращен статус ```201 Created```, в теле ответа будет содержаться идентификатор созданной записи.</br>
В случае обновления записи будет возвращен код ```200 OK```


## Удаление


```DELETE /api/appraisal/[appraisalExternalId]``` - где ```appraisalExternalId``` идентификатор анкетирования из внешней системы.


### Логика работы

В случае успешного удаления записи будет возвращен код ```200 OK```. В противном случае будет возвращен код ```500 Internal Server Error``` с текстом ошибки в теле запроса







