# AppraisalParticipant (Участник анкетирования)

## Создание/обновление

`POST /api/appraisalparticipant`

Пример сообщения в Body запроса:

```json
{
	"externalId": "2456852",
	"dateCompleted": "2019-02-01T00:00:00+03:00",
	"participantUserExternalId": "SU1408",
	"appraisalExternalId": "1929606",
	"isMain": "false",
	"status": "COMPLETED",
	"textFeedback": "0KHQstC10YLQsCDQm9Cw0L3RhtC+0LLQsCDQvtGH0LXQvdGMINGC0L7Qu9C60L7Q....,
	"textHint": null
}
```

### Описание полей

|Поле|Тип|Описание|
|----|--------|------------|
|externalId|string|Идентификатор участника из внешней системы|
|dateCompleted| datetime (подробнее о формате [здесь](general.md))| Дата выполнения|
|participantUserExternalId|string|Идентификатор оценивающего пользователя из внешней системы|
|appraisalExternalId|string|Идентификатор анкетирования из внешней системы|
|isMain| boolean | Основной оценивающий|
|status| Значения из [перечисления](#appraisal_participant_status)| Статус участника анкетирования|
|textFeedback|string| Текстовый отзыв. Строка, закодированная в ```Base64```|
|textHint|string| Подсказка по заполнению отзыва. Строка, закодированная в ```Base64```|


<a name=appraisal_participant_status></a>
### Статус участника анкетирования
|Значение|Описание|
|----|--------|
| OPEN | Ожидается отзыв | 
| COMPLETED | Отзыв дан |
| CLOSED | Сбор отзывов закрыт |


### Логика работы

Если участник анкетирования с таким же идентификатором из внешней системы уже существует, то будет произведена операция обновления. Если же такое анкетирование отсутствует, то будет создано новое.
В случае создания записи будет возвращен статус ```201 Created```, в теле ответа будет содержаться идентификатор созданной записи.</br>
В случае обновления записи будет возвращен код ```200 OK```

<a name="delete"></a>
## Удаление


```DELETE /api/appraisalparticipant/[appraisalParticipantExternalId]``` - где ```appraisalParticipantExternalId``` идентификатор участника анкетирования из внешней системы.


### Логика работы

В случае успешного удаления записи будет возвращен код ```200 OK```. В противном случае будет возвращен код ```500 Internal Server Error``` с текстом ошибки в теле запроса

| ВАЖНО: Удаление участника анкетирования влечет за собой последующее автоматическое удаление [ответов по анкетированию](participant_answer.md)! |
| --- |




