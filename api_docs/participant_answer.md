# ParticipantAnswer (Ответ по анкетированию)

## Создание/обновление

`POST /api/participantanswer`

Пример сообщения в Body запроса:

```json

{
	"externalId": "5556105",
	"appraisalParticipantExternalId": "2390893",
	"competenceExternalId": "115048",
	"ratingLevelExternalId": "12010"
}
```

### Описание полей

|Поле|Тип|Описание|
|----|--------|------------|
|externalId|string|Идентификатор ответа участника из внешней системы|
|appraisalParticipantExternalId|string|Идентификатор участника из внешней системы|
|competenceExternalId|string|Идентификатор критерия оценики из внешней системы. *Справочная сущность, в API отсутствует*|
|ratingLevelExternalId|string|Идентификатор значения критерия оценика из внешней системы. *Справочная сущность, в API отсутствует*|

### Логика работы

При получении сообщения первоначально будет произведен поиск соответствующей сущности по полю ```externalId``` . Если запись будет найдена, то произойдет ее обновление.
Если запись не будет найдена, то будет произведена повторная попытка найти сущность - по паре полей ```appraisalParticipantExternalId``` и ```competenceExternalId```.
Аналогично, если запись будет найдена, то произойдет ее обновление. В противном случае, будет создан новый ответ участника анкетирования
В случае создания записи будет возвращен статус ```201 Created```, в теле ответа будет содержаться идентификатор созданной записи.</br>
В случае обновления записи будет возвращен код ```200 OK```


## Удаление


```DELETE /api/participantanswer/[participantAnswerExternalId]``` - где ```participantAnswerExternalId``` идентификатор ответа участника анкетирования из внешней системы.


### Логика работы

В случае успешного удаления записи будет возвращен код ```200 OK```. В противном случае будет возвращен код ```500 Internal Server Error``` с текстом ошибки в теле запроса

| ВАЖНО: В случае, если ответ уже был удален в рамках [удаления участника](appraisal_participant.md#delete), операция все равно пройдет успешно! |
| --- |




