# ParticipantAnswer (Ответ по анкетированию)
## Создание

`POST /api/participants/{participantId}/answers`

где ```participantId``` - идентификатор участника анкетирования

Пример сообщения в Body запроса:

```json
{
  "externalId": "answer16041",
  "competenceId": "01DB599F-D34E-4714-AEBE-22A8D6E6723A",
  "ratingLevelId": "C79EFF84-6844-4CD3-9BBD-C3CDF2B65A30"
}
```

### Описание полей

|Поле|Тип|Ограничения|Описание|
|----|--------|------------|-----------|
|externalId|string| Unique |Внешний идентификатор (опциональный)|
|competenceId|string|Not Null|Идентификатор связанной компетенции. *Справочная сущность, в API отсутствует*|
|ratingLevelId|string| - |Идентификатор связанного уровня. *Справочная сущность, в API отсутствует*|


### Логика работы

Если не были переданы обязательные пераметры, то будет возвращен код ```400 BadRequest ```.
В случае создания записи будет возвращен статус ```201 Created```. В теле ответа JSON с идентификатором созданной сущности:

```json
{
    "id": "c8a35627-db25-45e8-a09d-ee7d1c6e8e8c"
}
```

## Обновление

`PUT /api/participants/{participantId}/answers/{participantAnswerId}`

где ```participantId``` - идентификатор участника  анкетирования, ```participantAnswerId``` - идентификатор ответа участника

### Логика работы

Сообщение в тело запроса соответствует сообщению для создания сущности. Сущность обновляется целиком (полная замена ресурса), поэтому должным быть заполнены все параметры. Если какой-то из параметров будет отсутствовать в теле запроса, то это будет воспринято как заполнение пустым значением.
</br>

Если не были переданы обязательные пераметры, то будет возвращен код ```400 BadRequest ```. Если анкетирование с переданным идентификатором не будет найдено, то будет передан код ```404 NotFound```.
В случае успешного обновления записи будет возвращен статус ```204 NoContent```.


## Частичное обновление

`PATCH /api/participants/{participantId}/answers/{participantAnswerId}`

где ```participantId``` - идентификатор участника  анкетирования, ```participantAnswerId``` - идентификатор ответа участника

Для частичного обновления ресурса используется формат [JSON Patch](http://jsonpatch.com/). Пример Body запроса:

```json
[
    {
        "op": "replace",
        "path": "/ratingLevelId",
        "value": "C79EFF84-6844-4CD3-9BBD-C3CDF2B65A30"
    }
]
```

### Логика работы

Формата JSON Patch позволяет манипулировать отдельными полями сущности (замена, копирование, удаление).
</br>

Если не были переданы обязательные пераметры, то будет возвращен код ```400 BadRequest ```. Если анкетирование с переданным идентификатором не будет найдено, то будет передан код ```404 NotFound```.
В случае успешного обновления записи будет возвращен статус ```204 NoContent```.


## Удаление


`DELETE /api/participants/{participantId}/answers/{participantAnswerId}`

где ```participantId``` - идентификатор участника  анкетирования, ```participantAnswerId``` - идентификатор ответа участника


### Логика работы

Если не были переданы обязательные пераметры, то будет возвращен код ```400 BadRequest ```. Если анкетирование с переданным идентификатором не будет найдено, то будет передан код ```404 NotFound```.
В случае успешного удаления записи будет возвращен статус ```204 NoContent```.


## Получение 

#### Получение конкретной записи
`GET /api/participants/{participantId}/answers/{participantAnswerId}`

где ```participantId``` - идентификатор участника  анкетирования, ```participantAnswerId``` - идентификатор ответа участника
 
#### Получение всех записей (участники конкретного анкетирования)

`GET /api/participants/{participantId}/answers`

где ```participantId``` - идентификатор участника  анкетирования

### Логика работы

Если не были переданы обязательные пераметры, то будет возвращен код ```400 BadRequest ```. Если анкетирование с переданным идентификатором не будет найдено (либо участник анкетирования), то будет передан код ```404 NotFound```.
В случае успешного запроса возвращен статус ```200 OK```, в теле же запроса будет сообщение с данными. Пример:

```json
{
    "id": "e82b4b51-ad54-4d56-8f8a-7a94da770c23",
    "externalId": "answer1604",
    "appraisalParticipantId": "6570404f-bdb9-48ae-be52-f96cf21d716e",
    "competenceId": "01db599f-d34e-4714-aebe-22a8d6e6723a",
    "ratingLevelId": "c79eff84-6844-4cd3-9bbd-c3cdf2b65a30"
}
```

### Описание полей

|Поле|Тип|Ограничения|Описание|
|----|--------|------------|-----------|
|id|string| Unique |Идентификатор ответа участника анкетирования|
|externalId|string| Unique |Внешний идентификатор (опциональный)|
|appraisalParticipantId|string| Not Null |Идентификатор участника анкетирования|
|competenceId|string|Not Null|Идентификатор связанной компетенции. *Справочная сущность, в API отсутствует*|
|ratingLevelId|string| - |Идентификатор связанного уровня. *Справочная сущность, в API отсутствует*|


В случае получения всех записей возвращается массив элементов с вышеописанным форматом.
